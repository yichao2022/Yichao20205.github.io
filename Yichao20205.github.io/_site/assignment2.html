<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Yichao.github.io - assignment2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Yichao.github.io</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">About</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./research.html">Research</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./project.html">Project</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./cv.pdf">CV</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-assignments" role="button" data-bs-toggle="dropdown" aria-expanded="false">Assignments</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-assignments">    
        <li>
    <a class="dropdown-item" href="./assignment1.html">
 <span class="dropdown-text">assignment1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment2.html">
 <span class="dropdown-text">assignment2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment3.html">
 <span class="dropdown-text">assignment3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment4.html">
 <span class="dropdown-text">assignment4</span></a>
  </li>  
    </ul>
  </li>
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#load-dataset" id="toc-load-dataset" class="nav-link active" data-scroll-target="#load-dataset">Load dataset</a></li>
  <li><a href="#basic-eda" id="toc-basic-eda" class="nav-link" data-scroll-target="#basic-eda">Basic EDA</a></li>
  <li><a href="#summary-statistics" id="toc-summary-statistics" class="nav-link" data-scroll-target="#summary-statistics">1. Summary statistics</a></li>
  <li><a href="#check-structure" id="toc-check-structure" class="nav-link" data-scroll-target="#check-structure">2. Check structure</a></li>
  <li><a href="#visualize-a-key-variable-e.g.-tondu" id="toc-visualize-a-key-variable-e.g.-tondu" class="nav-link" data-scroll-target="#visualize-a-key-variable-e.g.-tondu">3. Visualize a key variable (e.g., Tondu)</a></li>
  <li><a href="#check-for-missing-values" id="toc-check-for-missing-values" class="nav-link" data-scroll-target="#check-for-missing-values">4. Check for missing values</a></li>
  <li><a href="#example-relationship-between-tondu-and-age" id="toc-example-relationship-between-tondu-and-age" class="nav-link" data-scroll-target="#example-relationship-between-tondu-and-age">5. Example: Relationship between Tondu and age</a></li>
  <li><a href="#frequency-table" id="toc-frequency-table" class="nav-link" data-scroll-target="#frequency-table">Frequency table</a></li>
  <li><a href="#bar-chart" id="toc-bar-chart" class="nav-link" data-scroll-target="#bar-chart">Bar chart</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">assignment2</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<ol type="1">
<li>Lab01, Lab02 in R (Rendering and Uploading to GitHub)</li>
</ol>
<!-- -->
<ol type="a">
<li>Render and Upload Files to GitHub To render .qmd files and upload them to GitHub:</li>
</ol>
<p>Render .qmd Files: Open Lab01.qmd and Lab02.qmd in RStudio. Ensure you have the quarto package installed: install.packages(“quarto”). Click the “Render” button in RStudio or run quarto::quarto_render(“Lab01.qmd”) and quarto::quarto_render(“Lab02.qmd”). This generates Lab01.html, Lab01_files/ (folder with assets), Lab02.html, and Lab02_files/. Upload to GitHub: Create a GitHub repository (e.g., DataAnalysisLabs) if you haven’t already. Initialize a local Git repository in your project folder: bash</p>
<p>Copy git init git add Lab01.qmd Lab01.html Lab01_files/ Lab02.qmd Lab02.html Lab02_files/ git commit -m “Add Lab01 and Lab02 files” Link to your GitHub repository and push: bash</p>
<p>Copy git remote add origin <your-repo-url> git push -u origin main Verify on the GitHub website that all files and folders (Lab01.html, Lab01_files/, etc.) are uploaded. b. Ensure Associated Folders Are Uploaded The Lab01_files/ and Lab02_files/ folders contain assets (e.g., images, CSS) needed for the HTML files to render correctly. When adding files to Git, ensure these folders are included (as shown in the git add command above). Check .gitignore to confirm these folders aren’t excluded. If they are, remove Lab*_files/ from .gitignore. Tip: If the HTML files don’t render properly on GitHub Pages, ensure the folder structure is preserved and use relative paths in your .qmd files.</your-repo-url></p>
<ol start="2" type="1">
<li>Review Chapters 3–7 in R4DS, Section 3.5 in Data Programming R for Data Science (R4DS) Chapters 3–7 cover: Ch. 3: Data visualization with ggplot2 (e.g., scatterplots, bar charts). Ch. 4: Workflow basics (coding style, debugging). Ch. 5: Data transformation with dplyr (filter, arrange, select, mutate, summarize). Ch. 6: Workflow scripts and projects. Ch. 7: Exploratory Data Analysis (EDA) (visualizing distributions, relationships, handling missing data). Section 3.5 in Data Programming (assuming this refers to a specific text or course material) likely focuses on EDA techniques, such as summarizing data, visualizing distributions, or handling outliers. Run EDA on TEDS2016 Dataset Here’s a sample EDA using the provided code to load the TEDS2016 dataset:</li>
</ol>
<p>R</p>
<p>Copy library(haven) library(tidyverse)</p>
<section id="load-dataset" class="level1">
<h1>Load dataset</h1>
<p>TEDS_2016 &lt;- read_stata(“https://github.com/datageneration/home/blob/master/DataProgramming/data/TEDS_2016.dta?raw=true”)</p>
</section>
<section id="basic-eda" class="level1">
<h1>Basic EDA</h1>
</section>
<section id="summary-statistics" class="level1">
<h1>1. Summary statistics</h1>
<p>summary(TEDS_2016)</p>
</section>
<section id="check-structure" class="level1">
<h1>2. Check structure</h1>
<p>str(TEDS_2016)</p>
</section>
<section id="visualize-a-key-variable-e.g.-tondu" class="level1">
<h1>3. Visualize a key variable (e.g., Tondu)</h1>
<p>ggplot(TEDS_2016, aes(x = Tondu)) + geom_histogram(stat = “count”) + theme_minimal() + labs(title = “Distribution of Tondu”)</p>
</section>
<section id="check-for-missing-values" class="level1">
<h1>4. Check for missing values</h1>
<p>colSums(is.na(TEDS_2016))</p>
</section>
<section id="example-relationship-between-tondu-and-age" class="level1">
<h1>5. Example: Relationship between Tondu and age</h1>
<p>ggplot(TEDS_2016, aes(x = age, y = Tondu)) + geom_point() + theme_minimal() + labs(title = “Tondu vs.&nbsp;Age”) This code provides a starting point for EDA, including summary statistics, structure inspection, and basic visualizations.</p>
<ol start="3" type="1">
<li>Problems Encountered with the TEDS2016 Dataset Common issues when working with this dataset include:</li>
</ol>
<p>Data Loading Issues: The URL may fail if GitHub changes raw file access. If the read_stata command fails, download the .dta file locally and load it with read_stata(“path/to/TEDS_2016.dta”). File size or network issues may cause slow loading. Missing Values: Many variables (e.g., Tondu, income) may have missing values (NA or coded as specific values like 99). Check with colSums(is.na(TEDS_2016)) or table(TEDS_2016<span class="math inline">\(Tondu, useNA = "always"). Variable Coding: Variables like Tondu may be numeric but represent categorical responses (e.g., 1 = "Unification now"). Without labels, interpretation is challenging. Use attributes(TEDS_2016\)</span>Tondu) to check for value labels. Data Types: Some variables may load as haven_labelled (from haven), requiring conversion to factors or numeric for analysis (e.g., as_factor(TEDS_2016$Tondu)). Outliers or Inconsistent Data: Variables like age or income may have outliers (e.g., age &gt; 100 or negative values). Use summary() or boxplot() to identify anomalies. 4. Dealing with Missing Values Strategies for handling missing values in the TEDS2016 dataset:</p>
<p>Identify Missing Values: R</p>
<p>Copy colSums(is.na(TEDS_2016)) # For specific variables table(TEDS_2016$Tondu, useNA = “always”) Remove Missing Values: If missing values are minimal, remove rows: R</p>
<p>Copy TEDS_2016_clean &lt;- TEDS_2016 %&gt;% drop_na(Tondu, age, income) Alternatively, remove only for specific analyses: R</p>
<p>Copy TEDS_2016 %&gt;% filter(!is.na(Tondu)) %&gt;% ggplot(aes(x = Tondu)) + geom_bar() Impute Missing Values: Categorical Variables (e.g., Tondu): Impute with mode or a separate “Missing” category. R</p>
<p>Copy TEDS_2016<span class="math inline">\(Tondu[is.na(TEDS_2016\)</span>Tondu)] &lt;- “No response” Numeric Variables (e.g., age): Impute with mean or median. R</p>
<p>Copy TEDS_2016<span class="math inline">\(age[is.na(TEDS_2016\)</span>age)] &lt;- median(TEDS_2016$age, na.rm = TRUE) Flag Missing Values: Create a new variable to track missingness: R</p>
<p>Copy TEDS_2016<span class="math inline">\(Tondu_missing &lt;- is.na(TEDS_2016\)</span>Tondu) Model-Based Imputation: Use packages like mice for multiple imputation if missingness is complex: R</p>
<p>Copy library(mice) imputed_data &lt;- mice(TEDS_2016, m = 5, method = “pmm”) TEDS_2016_imputed &lt;- complete(imputed_data) Recommendation: Start by exploring the extent of missingness (colSums(is.na(TEDS_2016))). If missing values are minimal, use drop_na() for simplicity. For critical variables like Tondu, consider labeling missing values as “No response” to retain data.</p>
<ol start="5" type="1">
<li>Explore Relationships Between Tondu and Other Variables To explore relationships between Tondu (a measure of unification/independence preference) and variables like female, DPP, age, income, edu, Taiwanese, and Econ_worse:</li>
</ol>
<p>Methods to Use Descriptive Statistics: Cross-tabulations for categorical variables: R</p>
<p>Copy table(TEDS_2016<span class="math inline">\(Tondu, TEDS_2016\)</span>female) table(TEDS_2016<span class="math inline">\(Tondu, TEDS_2016\)</span>DPP) Visualizations: Bar Charts for categorical variables: R</p>
<p>Copy ggplot(TEDS_2016, aes(x = Tondu, fill = as_factor(female))) + geom_bar(position = “dodge”) + labs(title = “Tondu by Gender”) Boxplots for numeric variables: R</p>
<p>Copy ggplot(TEDS_2016, aes(x = as_factor(Tondu), y = age)) + geom_boxplot() + labs(title = “Age Distribution by Tondu”) Statistical Tests: Chi-Square Test for categorical variables (e.g., Tondu vs.&nbsp;female): R</p>
<p>Copy chisq.test(table(TEDS_2016<span class="math inline">\(Tondu, TEDS_2016\)</span>female)) ANOVA or t-tests for numeric variables (e.g., age across Tondu levels): R</p>
<p>Copy anova(lm(age ~ as_factor(Tondu), data = TEDS_2016)) Correlation Analysis: For numeric variables (e.g., age, income): R</p>
<p>Copy cor(TEDS_2016<span class="math inline">\(age, TEDS_2016\)</span>income, use = “complete.obs”) Regression Models: Use logistic regression if Tondu is treated as binary (e.g., unification vs.&nbsp;independence): R</p>
<p>Copy TEDS_2016<span class="math inline">\(Tondu_binary &lt;- ifelse(TEDS_2016\)</span>Tondu %in% c(1, 2), “Unification”, “Other”) model &lt;- glm(Tondu_binary ~ female + age + income, data = TEDS_2016, family = binomial) summary(model) Use multinomial regression for multi-level Tondu (requires nnet package). Recommendation: Start with visualizations (bar charts, boxplots) to identify patterns, then use chi-square tests for categorical variables and ANOVA for numeric ones. Convert Tondu to a factor with meaningful labels for clarity.</p>
<ol start="6" type="1">
<li>Explore the votetsai Variable (Vote for DPP Candidate Tsai Ing-wen) To analyze votetsai (likely a binary or categorical variable indicating whether the respondent voted for Tsai Ing-wen):</li>
</ol>
<p>EDA for votetsai: R</p>
<p>Copy table(TEDS_2016$votetsai, useNA = “always”) ggplot(TEDS_2016, aes(x = as_factor(votetsai))) + geom_bar() + labs(title = “Distribution of votetsai”) Relationship with Tondu: Cross-tabulation and chi-square test: R</p>
<p>Copy table(TEDS_2016<span class="math inline">\(votetsai, TEDS_2016\)</span>Tondu) chisq.test(table(TEDS_2016<span class="math inline">\(votetsai, TEDS_2016\)</span>Tondu)) Stacked bar chart: R</p>
<p>Copy ggplot(TEDS_2016, aes(x = as_factor(Tondu), fill = as_factor(votetsai))) + geom_bar(position = “fill”) + labs(title = “votetsai by Tondu”, y = “Proportion”) Logistic Regression: If votetsai is binary (1 = voted for Tsai, 0 = did not): R</p>
<p>Copy model_votetsai &lt;- glm(votetsai ~ Tondu + female + age + income, data = TEDS_2016, family = binomial) summary(model_votetsai) Recommendation: Focus on the relationship between votetsai and Tondu, as political ideology likely influences voting. Use visualizations and chi-square tests to confirm associations.</p>
<ol start="7" type="1">
<li>Frequency Table and Bar Chart for Tondu with Labels To generate a frequency table and bar chart for Tondu with the specified labels:</li>
</ol>
<p>R</p>
<p>Copy # Assign labels to Tondu TEDS_2016<span class="math inline">\(Tondu &lt;- factor(TEDS_2016\)</span>Tondu, levels = 1:7, labels = c(“Unification now”, “Status quo, unif. in future”, “Status quo, decide later”, “Status quo forever”, “Status quo, indep. in future”, “Independence now”, “No response”))</p>
</section>
<section id="frequency-table" class="level1">
<h1>Frequency table</h1>
<p>table(TEDS_2016$Tondu, useNA = “always”)</p>
</section>
<section id="bar-chart" class="level1">
<h1>Bar chart</h1>
<p>ggplot(TEDS_2016, aes(x = Tondu)) + geom_bar() + theme_minimal() + theme(axis.text.x = element_text(angle = 45, hjust = 1)) + labs(title = “Frequency of Tondu Responses”, x = “Tondu”, y = “Count”) Notes:</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>